%include "packages/packages"

%ifdef GNU
OBJ=$(addprefix $(OBJDIR)/,$(subst .c,.o,$(SRC)))
LIBS=-I../libs -lmongoc-1.0 -lbson-1.0


$(OBJDIR)/%.o: %.c
	gcc -I$(OBJDIR) -I.. $(LIBS)   -o $@ -c $<
%else
.c.$(O):
	$(CC) $(CFLAGS) -I.. -c $*.c
%endif

all: $(OBJ)
	ar rcu packages.$(A) $(OBJ)
	$(RANLIB) packages.$(A)

clean:
	rm -f *.$(O)
	rm -f packages.$(A)
